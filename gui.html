<!DOCTYPE html>
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <title>ENCRYPTION AND DECRYPTION</title>
      <link rel="stylesheet" href="style.css">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
   </head>
   <body>
      <div class="wrapper">
         <div class="title-text">
            <div class="title encryption">
             Encryption
            </div>
            <div class="title decryption">
             Decryption
            </div>
         </div>

         <div class="form-container">
            <div class="slide-controls">
               <input type="radio" name="slide" id="encryption" checked>
               <input type="radio" name="slide" id="decryption">
               <label for="encryption" class="slide encryption">Encrypte</label>
               <label for="decryption" class="slide decryption">Decrypte</label>
               <div class="slider-tab"></div>
            </div>
            <!-- ENCRYPTION -->
            <div class="form-inner">
               <form action="#" class="encryption">
                  <div class="field">
                     <input id = "plaintext" type="text" placeholder="Plaintext" required>
                     <div id="EnErrormsg"></div>
                  </div>
                  
                  <div class="field">
                     <p id ="encryptionResult"></p>
                  </div>

                  <div class="field btn">
                     <div class="btn-layer"></div>
                     <input id = "plaintextBTN" type="submit" value="Encryption">
                  </div>

              </form>
              <!-- DECRYPTION -->
               <form action="#" class="decryption">
                  <div class="field">
                     <input id = "ciphertext" type="text" placeholder="Ciphertext" required>
                     <div id="DeErrormsg"></div>
                  </div>

                  <div class="field">
                     <p id ="decryptionResult"></p>
                  </div>
             
                  <div class="field btn"> 
                     <div class="btn-layer"></div>
                     <input id = "ciphertextBTN" type="submit" value="Decryption">
                  </div>
               </form>
            </div>
         </div>
      </div>


   <script type = "text/javascript">
      window.addEventListener( "load" , start , false );
      function start(){
         var plaintext = document.getElementById("plaintextBTN");
         var ciphertext = document.getElementById("ciphertextBTN");
         plaintext.addEventListener("click",encrypt,false );
         ciphertext.addEventListener("click",decrypt,false );
      }

      const  p = 3 ; /* 1st prime number p*/
      const q = 11; /* 2st prime number q*/
      const n = p * q ; /* n */
      const z = ( p - 1 )*( q - 1 ); /*Euler*/
      const e = 7;/* public key */
      const d = 3 ;/* private key */
   
      function encrypt(){
         var msg = document.getElementById("plaintext").value;
         if(isNaN(msg) || msg < 1 || msg > 33){
            document.getElementById("EnErrormsg").innerHTML = "<p style = 'color:red;'>Invalid input!</p>";
            return;
         }
         else{
            document.getElementById("Errormsg").innerHTML = ""; 
         }

      //    var p = 11 ; /* 1st prime number p*/
      // var q = 13; /* 2st prime number q*/
      // var n = p * q ; /* n */
      // var z = ( p - 1 )*( q - 1 ); /*Euler*/
      // var e = 11;/* public key */
      // var d = 11 ;/* private key */

      // for (e = 2 ; e < z ; e++){
      //    /* public key */
      //    if(gcd(e,z) == 1)
      //    break;
      // }
      // for (var i = 0 ; i <= 9 ; i++){
      //    var x = 1 + (i * z);
      //    /* private key */
      //    if( x % e == 0 )
      //    {
      //       d = x / e ;
      //       break;
      //    }
      // }
         
         var ciphertext = (Math.pow(msg,e)) % n;

         var result = document.getElementById("encryptionResult");
         result.innerHTML=ciphertext;
      }

      function decrypt(){

         var c = document.getElementById("ciphertext").value;

         if(isNaN(c) || c < 1 ){
            document.getElementById("DeErrormsg").innerHTML = "<p style = 'color:red;'>Invalid input!</p>";
            return;
         }
         else{
            document.getElementById("DeErrormsg").innerHTML = ""; 
         }
      //    var p = 3 ; /* 1st prime number p*/
      // var q = 11; /* 2st prime number q*/
      // var n = p * q ; /* n */
      // var z = ( p - 1 )*( q - 1 ); /*Euler*/
      // var e ;/* public key */
      // var d ;/* private key */

      // for (e = 2 ; e < z ; e++){
      //    /* public key */
      //    if(gcd(e,z) == 1)
      //    break;
      // }
      // for (var i = 0 ; i <= 9 ; i++){
      //    var x = 1 + (i * z);
      //    /* private key */
      //    if( x % e == 0 )
      //    {
      //       d = x / e ;
      //       break;
      //    }
      // }
         var c = document.getElementById("ciphertext").value;
         var plaintext = (Math.pow(c,d)) % n;

         var result = document.getElementById("decryptionResult");
         result.innerHTML= plaintext;
      }
   

      // function gcd(a, b) {
      //      while(a != b){
      //       if(a > b) {
      //           a -= b;
      //       }
      //       else {
      //        b -= a;
      //       }
      //      }
      //      return a;
      // }//end gcd function
   </script>

      <script>
         const encryptionText = document.querySelector(".title-text .encryption");
         const encryptionForm = document.querySelector("form.encryption");
         const encryptionBtn = document.querySelector("label.encryption");
         const decryptionBtn = document.querySelector("label.decryption");
         const decryptionLink = document.querySelector("form .decryption-link a");
         decryptionBtn.onclick = (()=>{
          encryptionForm.style.marginLeft = "-50%";
          encryptionText.style.marginLeft = "-50%";
         });
         encryptionBtn.onclick = (()=>{
          encryptionForm.style.marginLeft = "0%";
          encryptionText.style.marginLeft = "0%";
         });
         decryptionLink.onclick = (()=>
         {
          decryptionBtn.click();
           return false;
         });
         </script>
   </body>
</html>